---
import Layout from "../../layouts/Layout.astro";
import { getCollection, render } from "astro:content";

const posts = await getCollection("posts");
---

<Layout title="Posts — Juan Cruz Miranda">
  <h1>Posts</h1>

  {posts
    .sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime())
    .map(async (post) => {
      const { Content } = await render(post);
      return (
        <article style="margin-bottom: 2rem;">
          <h2><a href={`/posts/${post.slug}/`}>{post.data.title}</a></h2>
          <p style="color:#777; margin: 0.2rem 0 1rem;">{post.data.description}</p>
          <a href={`/posts/${post.slug}/`}>Leer más →</a>
        </article>
      );
    })}
</Layout>
